<div
  fxLayout="row wrap"
  fxLayoutAlign="space-between"
  fxLayoutGap="1rem grid"
  fxLayoutGap.lt-md="0.25rem grid"
>
  <div
    class="mat-h2 clickable"
    fxLayoutAlign="center center"
    [routerLink]="['/browse/albums']"
    (click)="resetFilter()"
  >
    Albums
  </div>
  <div class="text-muted" fxLayoutAlign="center center">
    Page {{ page | async }}
  </div>

  <!--Filter-->
  <div fxLayoutAlign="center center" fxFlex="30%" fxFlex.lt-md="100%">
    <mat-form-field class="full-width">
      <input
        #searchInput
        matInput
        placeholder="Filter albums"
        autocomplete="off"
        type="text"
        [(ngModel)]="filter"
        (keydown.escape)="resetFilter()"
        (keyup)="applyFilter($event.target)"
      />
      <button
        mat-button
        *ngIf="filter"
        matSuffix
        mat-icon-button
        aria-label="Clear"
        (click)="resetFilter()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>
</div>

<mat-divider></mat-divider>

<div
  fxLayout="row wrap"
  fxLayout.lt-md="column"
  fxLayoutAlign="space-between"
  fxLayoutAlign.lt-md="center center"
  fxLayoutGap="1rem grid"
  fxLayoutGap.lt-md="1rem"
>
  <div
    fxFlex
    fxFlex.lt-md="100%"
    fxLayoutAlign="center center"
    *ngFor="let album of albums | async"
  >
    <app-album-item fxFlex.lt-md="100%" [album]="album"></app-album-item>
  </div>
</div>

<ng-container *ngIf="albums | async as albumList">
  <ng-container *ngIf="albumList.length > 0; else noResults">
    <div *ngIf="page | async as pageNo">
      <mat-divider></mat-divider>
      <app-albums-pagination [pageNo]="pageNo"></app-albums-pagination>
    </div>
  </ng-container>
</ng-container>

<ng-template #noResults>No albums found.</ng-template>
